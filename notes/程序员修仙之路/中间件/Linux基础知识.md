# 一、Linux安装

## 一、安装vmware workstation

1. 无脑安装vmware workstation

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f343339656664343661303164396463326637393636396234633461363535313432623433623664662e706e67.png)

2. 编辑vmware workstation的虚拟网卡

	- 网卡模式区别

		- 桥接模式：虚拟机电脑在网络环境中的地位和宿主环境（开发电脑）是一样的，虚拟机可以上网，但是ip地址会变来变去，因为虚拟机的ip地址是由DHCP动态分配的
		- NAT模式：开发电脑（宿主环境）会通过虚拟网卡构建一个局域网，虚拟机电脑作为局域网中一个成员，由于局域网受开发电脑的控制，因此虚拟机电脑的ip地址可以是固定的，局域网中的成员（虚拟机）可以通过开发电脑（宿主环境）间接的连到外面的互联网
		- 仅主机模式：虚拟机相当于黑户，完全和外界隔绝，因此不能上网

	- 规划局域网

		- 网段：192.168.10.xx
		- 子网掩码：255.255.255.0
		- 网关：192.168.10.2

	- 编辑虚拟网卡（推荐使用10的网段，而不是使用图片中的19网段）

		![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f353565313465396363623163396363326637396262373763323364303566653130653437306635302e706e67.png)

		![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f663033353665343761346432613764386135336232393862303132356566616363646137396262342e706e67.png)

		![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f313132613463346532633665393238613139316632646632653038363965313136396565303664652e706e67.png)

		![](https://camo.githubusercontent.com/e7ef1a0185090dcc261cee4ac7457d6248380aa6a6e35a80dc5ec6418743147f/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f646561383234623737653436353035663966323164613635653330613236313763643566373166382e706e67)

		![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f616133333365653431666236323538303138313330616235633337323163623663306234313263312e706e67.png)

		![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f643038653936323033646239636564623766373061643961356563333731633737653333306661342e706e67.png)

		![](https://camo.githubusercontent.com/a1088358862cab33e65def4303e881c8965ee42c43beeac16e9d04ecda7ff272/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f303938353138333662656562316139376363366334663933663963333163396361613036663833342e706e67)

## 二、安装centos7

1. [VM安装CentOS7视频教程](https://www.bilibili.com/video/BV1Kh4y1m767/?spm_id_from=333.337.search-card.all.click&vd_source=0d890470387b4243e4e6e1ad09c32d2f)

2. 更改网络配置

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f646335343931393761316665643736666630636563613238633838623236663937333630343666392e706e67.png)

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f363130636533643962613739643631363632623231363363613230343034343438373438313263332e706e67.png)

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f663862613330306663666430336539663531343733393262366132353862383365313438336234622e706e67.png)

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f316566653232306261366662386330626437393138373335303936346462636337626533393231372e706e67.png)

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f646234316137393038363030386266626663313833653733313733653235393963666330613364652e706e67.png)

# 二、Linux基本目录

## 一、基本介绍

1. Linux的文件系统采用级层式子的树状目录结构，

2. 最上层是根目录`/`

	![](../../../TyporaImage/68747470733a2f2f69302e6864736c622e636f6d2f6266732f616c62756d2f396236613766623166646239373936323238666563343633323766663062363939353363636166302e6a7067.jpg)

3.  Linux世界里，一切皆文件

## 二、目录用途

1. `/bin` 是Binary的缩写，这个目录存放着最经常使用的命令
2. `/sbin`其中s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序
3. `/home`该目录下存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的
4. `/root`该目录为系统管理员，也称作超级权限者的用户主目录
5. `/lib`是系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库
6. `/lost+found`这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件
7. `/etc`是所有的系统管理所需要的配置文件和子目录my.conf
8. `/usr/local`是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录
9. `/boot`中存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件
10. `/proc`这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息
11. `/srv`此目录名称是service的缩写，该目录存放一些服务启动之后需要提供的数据
12. `/sys`这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs
13. `/tmp`这个目录是用来存放一些临时文件的
14. `/dev`类似windows的设备管理器，把所有的硬件用文件的形式存储
15. `/media`在linux系统中会自动识别一些设备，例如U盘光驱等等，当识别后，linux会把识别的设备挂载到这个目录下
16. `/mnt`系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了
17. `/opt`这是给主机额外安装软件所摆放的目录，如安装ORACLE数据库就可放到该目录下。默认为空
18. `/usr/local`这是另一个给主机额外安装软件所安装的目录，一般是通过编译源码的方式安装的程序
19. `/var`这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件
20. `/selinux`这是一种安全子系统，它能控制程序只能访问特定文件

## 三、Linux目录总结

1. Linux的目录中有且只有一个根目录
2. Linux的各个目录存放的内容是规划好，不用乱放文件
3. Linux是以文件的形式管理我们的设备，因此linux系统，一切皆为文件。
4. Linux的各个文件目录下存放什么内容，必须有一个认识

# 三、vi和vim编辑器

## 一、vi和vim的基本介绍

1. 所有Linux系统都会内置vi文本编辑器

2. vim是vi的升级版，可以主动以字体颜色分辨语法的正确性，代码补完和编译，错误跳转等功能

3. vi/vim键盘图

	![image-20220815123840409](../../../TyporaImage/a0196d78f8e7e4af8150fc199185b84c90fc644a.png)

## 二、vi和vim的三种模式

1. 基本上vi/vim共分为三种模式，分别是命令模式（Command mode）、输入模式（Insert mode）和底线命令模式（Last line mode）

2. 正常模式

	- 用户刚刚启动 vi/vim，便进入了正常模式。此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令
	- 常用的命令：
		- **i** 切换到输入模式，以输入字符
		- **x** 删除当前光标所在处的字符
		- **:** 切换到底线命令模式，以在最底一行输入命令。
	- 若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式
	- 命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令

3. 插入/编辑模式

	- 在命令模式下按下i就进入了输入模式
	- 在输入模式中，可以使用以下按键：
		- **字符按键以及Shift组合**，输入字符
		- **ENTER**，回车键，换行
		- **BACK SPACE**，退格键，删除光标前一个字符
		- **DEL**，删除键，删除光标后一个字符
		- **方向键**，在文本中移动光标
		- **HOME**/**END**，移动光标到行首/行尾
		- **Page Up**/**Page Down**，上/下翻页
		- **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
		- **ESC**，退出输入模式，切换到命令模式

4. 命令行模式

	- 在命令模式下按下:（英文冒号）就进入了底线命令模式
	- 底线命令模式可以输入单个或多个字符的命令，可用的命令非常多
	- 在底线命令模式中，基本的命令有（已经省略了冒号）：
		- q 退出程序
		- w 保存文件
	- 按ESC键可随时退出底线命令模式

5. 三种模式转换示意图

	![3.2vim模式转换.jpg](../../../TyporaImage/be02de7ca3ef734ffc094598a07193a7ddc56b7a.jpg)

6. vi/vim使用实例

	- 使用vi/vim进入一般模式

		- 使用vi来建立一个名为runoob.txt的文件时，可以这样做：

			```shell
			$ vim runoob.txt
			```

		- 直接输入 vi文件名就能够进入vi的一般模式了。请注意，记得vi后面一定要加文件名，不管该文件存在与否

			![image-20220815124239030](../../../TyporaImage/6e4689bed198cb377cd7341650f9927ae4002295.png)

	- 按下 i 进入输入模式(也称为编辑模式)，开始编辑文字

		- 在一般模式之中，只要按下 i, o, a 等字符就可以进入输入模式了

		- 在编辑模式当中，你可以发现在左下角状态栏中会出现 –INSERT- 的字样，那就是可以输入任意字符的提示

		- 这个时候，键盘上除了**Esc**这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑

			![image-20220815124308987](../../../TyporaImage/cdfc99dc399b6fc3b0e83a6280eb816535e64ed7.png)

	- 按下ESC按钮回到一般模式：好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下 **Esc** 这个按钮即可！马上你就会发现画面左下角的 – INSERT – 不见了

	- 在一般模式中按下 :wq 储存后离开 vi：OK，我们要存档了，存盘并离开的指令很简单，输入 **:wq** 即可保存离开！

7. Vim按键说明

	- 一般模式的光标移动、搜索替换、复制粘贴。注意点有：

	  - 光标移动时在查找过程中需要注意的是，要查找的字符串是严格区分大小写的，如查找 "shenchao" 和 "ShenChao" 会得到不同的结果
	  - 光标移动时如果想忽略大小写，则输入命令 ":set ic"；调整回来输入":set noic"
	  - 光标移动时如果在字符串中出现特殊符号，则需要加上转义字符`\`。常见的特殊符号有 `\`、`*`、`?`、`$ `等。如果出现这些字符，例如，要查找字符串"10$"，则需要在命令模式中输入 "/10\$"
	  - 删除文本时注意的是被删除的内容并没有真正删除，都放在了剪贴板中。将光标移动到指定位置处，按下 "p" 键，就可以将刚才删除的内容又粘贴到此处
	
	  |   移动光标的方法   |                           功能描述                           |
	  | :----------------: | :----------------------------------------------------------: |
	  | h 或 向左箭头键(←) |                     光标向左移动一个字符                     |
	  | j 或 向下箭头键(↓) |                     光标向下移动一个字符                     |
	  | k 或 向上箭头键(↑) |                     光标向上移动一个字符                     |
	  | l 或 向右箭头键(→) |                     光标向右移动一个字符                     |
	  |    [Ctrl] + [f]    |     屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)      |
	  |    [Ctrl] + [b]    |      屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)      |
	  |    [Ctrl] + [d]    |                     屏幕『向下』移动半页                     |
	  |    [Ctrl] + [u]    |                     屏幕『向上』移动半页                     |
	  |         +          |                  光标移动到非空格符的下一行                  |
	  |         -          |                  光标移动到非空格符的上一行                  |
	  |      n<space>      | 那个n表示『数字』，例如20。按下数字后再按空格键，光标会向右移动这一行的n个字符。例如`20<space>`则光标会向后面移动20个字符距离 |
	  |  0 或功能键[Home]  |      这是数字『 0 』，移动到这一行的最前面字符处 (常用)      |
	  |  $ 或功能键[End]   |               移动到这一行的最后面字符处(常用)               |
	  |         H          |         光标移动到这个屏幕的最上方那一行的第一个字符         |
	  |         M          |          光标移动到这个屏幕的中央那一行的第一个字符          |
  |         L          |         光标移动到这个屏幕的最下方那一行的第一个字符         |
	  |         G          |                移动到这个档案的最后一行(常用)                |
	  |         nG         | n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu) |
	  |         gg         |        移动到这个档案的第一行，相当于 1G 啊！ (常用)         |
	  |      n<Enter>      |                n为数字。光标向下移动n行(常用)                |
	
	  |  搜索  |                           功能描述                           |
	  | :----: | :----------------------------------------------------------: |
	  | /word  | 向光标之下寻找一个名称为word的字符串。例如要在档案内搜寻vbird这个字符串，就输入 /vbird 即可！ (常用) |
  | ‘?word |          向光标之上寻找一个字符串名称为word的字符串          |
	  | /^abc  |                     查找以abc为行首的行                      |
	  | /abc$  |                     查找以abc为行尾的行                      |
	  |   n    | 这个n是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 /vbird去向下搜寻vbird这个字符串，则按下n后，会向下继续搜寻下一个名称为 vbird的字符串。如果是执行?vbird的话，那么按下n则会向上继续搜寻名称为 vbird的字符串 |
	  |   N    | 这个N是英文按键。与n刚好相反，为『反向』进行前一个搜寻动作。 例如 /vbird后，按下N则表示『向上』搜寻vbird |
	
	  |    替换文本     |                           功能描述                           |
	  | :-------------: | :----------------------------------------------------------: |
	  |        r        |                    替换光标所在位置的字符                    |
	  |        R        | 从光标所在位置开始替换字符，其输入内容会覆盖掉后面等长的文本内容，按“Esc”可以结束 |
	  |   :s/a1/a2/g    |            将当前光标所在行中的所有 a1 用 a2 替换            |
	  | :n1,n2s/a1/a2/g |          将文件中 n1 到 n2 行中所有 a1 都用 a2 替换          |
	  |   :g/a1/a2/g    | 将文件中所有的 a1 都用 a2 替换例如，要将某文件中所有的 "root" 替换为 "liudehua"，则有两种输入命令，分别为： |
	
	  ```bash
	  :1, $s/root/sunsh/g
	  或
	  :%s/root/sunsh/g
	  
	  # 上述命令是在编辑模式下操作的，表示的是从第一行到最后一行，
	  # 即全文查找 "root"，然后替换成 "sunsh"
	  
	  # 如果刚才的命令变成 `:10,20 s/root/sunsh/g`，
	  # 则只替换从第 10 行到第 20 行的 "root"
	  ```
	
	  | 复制粘贴  |                          功能描述                          |
	  | :-------: | :--------------------------------------------------------: |
	  |     p     |                将剪贴板中的内容粘贴到光标后                |
	  | P（大写） |                将剪贴板中的内容粘贴到光标前                |
	  |     y     |                  复制已选中的文本到剪贴板                  |
	  |    yy     | 将光标所在行复制到剪贴板，此命令前可以加数字 n，可复制多行 |
	  |    yw     |                将光标位置的单词复制到剪贴板                |
	
	  | 删除文本 |                功能描述                |
	  | :------: | :------------------------------------: |
	  |    x     |         删除光标所在位置的字符         |
	  |    dd    |             删除光标所在行             |
	  |   ndd    |   删除当前行（包括此行）后 n 行文本    |
	  |    dG    | 删除光标所在行一直到文件末尾的所有内容 |
	  |    D     |        删除光标位置到行尾的内容        |
	  | :a1,a2d  |     函数从 a1 行到 a2 行的文本内容     |
	
	- 一般模式切换到编辑模式
	
	- 一般模式切换到指令行模式
	
8. Vim的常见指令

	- Vim必须掌握的指令

		|                             指令                             |               功能描述               |
		| :----------------------------------------------------------: | :----------------------------------: |
		|                              yy                              |           复制光标当前一行           |
		|                             5yy                              |             拷贝当前5行              |
		|                              p                               |         箭头移动到目的行粘贴         |
		|                              u                               |              撤销上一步              |
		|                              dd                              |              删除当前行              |
		|                             5dd                              |         删除当前行向下的5行          |
		|                              x                               |       剪切一个字母，相当于del        |
		|                              X                               |      剪切一个字母，相当于退格键      |
		|                              yw                              |              复制一个词              |
		|                              dw                              |              删除一个词              |
		|          命令行输入 `/`（查找内容），按n查找下一个           |         在文件中查找某个单词         |
		|                set nu，取消文件行号：set nonu                |             设置文件行号             |
		|      正常模式下使用快捷键到达文档最末行：G，最首行：gg       |               编辑文件               |
		| 光标移动到某行：shift+g；显示行号：set nu；输入行号这个数；输入shift+g |               编辑文件               |
		|                              w                               | 向前移动一个单词（光标停在单词首部） |
		|                              b                               |  向后移动一个单词2b向后移动2个单词   |

	- 插入命令

		| 指令 |         说明         |
		| :--: | :------------------: |
		|  i   |  在当前位置生前插入  |
		|  I   |    在当前行首插入    |
		|  a   |   在当前位置后插入   |
		|  A   |    在当前行尾插入    |
		|  o   | 在当前行之后插入一行 |
		|  O   | 在当前行之前插入一行 |

	- 游标移动

		|      指令       |                           说明                            |
		| :-------------: | :-------------------------------------------------------: |
		|       gg        |                    移动到文件头。 = [[                    |
		| G（shift + g）  |                    移动到文件尾。 = ]]                    |
		|    行數 → G     |                       移動到第 n 行                       |
		| 冒号+行号，回车 |                比如跳到240行就是 :240回车                 |
		|        h        |                       左移一个字符                        |
		|        l        |        右移一个字符，这个命令很少用，一般用w代替。        |
		|        k        |                       上移一个字符                        |
		|        j        |                       下移一个字符                        |
		|        w        |           向前移动一个单词（光标停在单词首部）            |
		|        b        |            向后移动一个单词 2b 向后移动2个单词            |
		|        e        |               同w，只不过是光标停在单词尾部               |
		|       ge        |                  同b，光标停在单词尾部。                  |
		|        ^        |              移动到本行第一个非空白字符上。               |
		|        0        |                  移动到本行第一个字符上                   |
		|      HOME       |               移动到本行第一个字符。同0健。               |
		|        $        |             移动到行尾 3$ 移动到下面3行的行尾             |
		|    f（find）    | fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。 |
		|        F        |                       同f，反向查找                       |

	- 撤销和重做

		|   指令   |            说明            |
		| :------: | :------------------------: |
		|    u     |        撤销（Undo）        |
		|    U     |      撤销对整行的操作      |
		| Ctrl + r | 重做（Redo），即撤销的撤销 |

	- 删除命令

		| 指令                | 说明                                   |
		| ------------------- | -------------------------------------- |
		| x                   | 删除当前字符                           |
		| 3x                  | 删除当前光标开始向后三个字符           |
		| X                   | 删除当前字符的前一个字符。X=dh         |
		| dl                  | 删除当前字符， dl=x                    |
		| dh                  | 删除前一个字符                         |
		| dd                  | 删除当前行                             |
		| dj                  | 删除上一行                             |
		| dk                  | 删除下一行                             |
		| 10d                 | 删除当前行开始的10行。                 |
		| D                   | 删除当前字符至行尾。D=d$               |
		| d$                  | 删除当前字符之后的所有字符（本行）     |
		| kdgg                | 删除当前行之前所有行（不包括当前行）   |
		| jdG（jd shift + g） | 删除当前行之后所有行（不包括当前行）   |
		| :1,10d              | 删除1-10行                             |
		| :11,$d              | 删除11行及以后所有的行                 |
		| :1,$d               | 删除所有行                             |
		| J(shift + j)        | 删除两行之间的空行，实际上是合并两行。 |

	- 拷贝，剪贴和粘贴：正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按y即可复制

		|    指令     |                             说明                             |
		| :---------: | :----------------------------------------------------------: |
		|     yy      |                          拷贝当前行                          |
		|     nyy     |      拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。      |
		|      p      | 在当前光标后粘贴,如果之前使用了yy命令来复制一行，那么就在当前行的下一行粘贴。 |
		|   shift+p   |                        在当前行前粘贴                        |
		| :1,10 co 20 |                  将1-10行插入到第20行之后。                  |
		|  :1,$ co $  |             将整个文件复制一份并添加到文件尾部。             |
		|     ddp     |                     交换当前行和其下一行                     |
		|     xp      |                  交换当前字符和其后一个字符                  |
		|     ndd     |    剪切当前行之后的n行。利用p命令可以对剪切的内容进行粘贴    |
		|   :1,10d    |      将1-10行剪切。利用p命令可将剪切后的内容进行粘贴。       |
		| :1, 10 m 20 |                 将第1-10行移动到第20行之后。                 |

	- 退出模式

		| 指令 |              说明              |
		| :--: | :----------------------------: |
		| :wq  |           保存并退出           |
		|  ZZ  |           保存并退出           |
		| :q!  |     强制退出并忽略所有更改     |
		| :e!  | 放弃所有修改，并打开原来文件。 |
		|  :q  |         未修改直接退出         |

# 四、网络配置

## 一、三种网络模式详解

1. 网络模式分类

	- vmware为我们提供了三种网络工作模式，它们分别是：Bridged（桥接模式）、NAT（网络地址转换模式）、Host-Only（仅主机模式）

	- 打开vmware虚拟机，我们可以在选项栏的“编辑”下的“虚拟网络编辑器”中看到VMnet0（桥接模式）、VMnet1（仅主机模式）、VMnet8（NAT模式）。其实，我们现在看到的VMnet0表示的是用于桥接模式下的虚拟交换机；VMnet1表示的是用于仅主机模式下的虚拟交换机；VMnet8表示的是用于NAT模式下的虚拟交换机

		![image-20220815195704711](../../../TyporaImage/ee24cee5cdad25bb2a992ba665553b822473b126.png)

	- 同时，在主机上对应的有VMware Network Adapter VMnet1和VMware Network Adapter VMnet8两块虚拟网卡，它们分别作用于仅主机模式与NAT模式下。在“网络连接”中我们可以看到这两块虚拟网卡，如果将这两块卸载了，可以在vmware的“编辑”下的“虚拟网络编辑器”中点击“还原默认设置”，可重新将虚拟网卡还原

		![image-20220815195743297](../../../TyporaImage/3244dc5ef61faac2bfee5a5940d7a4883718fcf6.png)

	- 真机上没有VMware Network Adapter VMnet0虚拟网卡

2. Bridged（桥接模式）

	- 桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。在桥接的作用下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样插在这个交换机当中，所以所有桥接下的网卡与网卡都是交换模式的，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关DNS需要与主机网卡一致。其网络结构如下图所示：

		![image-20220815195824917](../../../TyporaImage/da53965814800fc4c6ed509d342a98c92ebaf73f.png)

	- 点击“网络适配器”，选择“桥接模式”，然后“确定”

		![image-20220815195911118](../../../TyporaImage/bbf1feb660af180fbc6758834b276e4a757c2a16.png)

	- 在进入系统之前，先确认一下主机的ip地址、网关、DNS等信息

		![image-20220815195920630](../../../TyporaImage/12ea5f96f660c11d2949098d8c7f7af7af0e281e.png)

	- 然后，进入系统编辑网卡配置文件，在终端输入命令`vim /etc/sysconfig/network-scripts/ifcfg-eth0`。添加内容如下：

		![image-20220815200013770](../../../TyporaImage/feecd44f3a8c421c6340e1bc9b07467b36a5be64.png)

	- 编辑完成，保存退出，然后重启虚拟机网卡，使用ping命令ping外网ip，测试能否联网。能ping通外网ip，证明桥接模式设置成功。ping语法为：ping [主机地址]，例如ping www.baidu.com

		![image-20220815200027788](../../../TyporaImage/f82d7bd3be7abb5b18cba1d35570023ba9e259e4-1717377522552.png)

	- 主机与虚拟机之间的通信，可以使用远程工具来测试。使用远程工具能连接成功则说明通讯正常

		![image-20220815200102291](../../../TyporaImage/3a720a028a54a7d98aaff5f55799aef20d59b671.png)

	- 桥接模式配置简单，但如果你的网络环境是ip资源很缺少或对ip管理比较严格的话，那桥接模式就不太适用了

3. NAT（地址转换模式）

	- 如果网络ip资源紧缺，但是又希望你的虚拟机能够联网，这时候NAT模式是最好的选择。NAT模式借助虚拟NAT设备和虚拟DHCP服务器，使得虚拟机可以联网。其网络结构如下图所示：

		![image-20220815200210830](../../../TyporaImage/e9688aa206ae1003042fe5256a25497b91c05c05.png)

	- 在NAT模式中，主机网卡直接与虚拟NAT设备相连，然后虚拟NAT设备与虚拟DHCP服务器一起连接在虚拟交换机VMnet8上，这样就实现了虚拟机联网。那么我们会觉得很奇怪，为什么需要虚拟网卡VMware Network Adapter VMnet8呢？原来我们的VMware Network Adapter VMnet8虚拟网卡主要是为了实现主机与虚拟机之间的通信。在之后的设置步骤中，我们可以加以验证

	- 首先，设置虚拟机中NAT模式的选项，打开vmware，点击“编辑”下的“虚拟网络编辑器”，设置NAT参数及DHCP参数

		![image-20220815200228608](../../../TyporaImage/d62e2bb3d5a15dc2dbca6d594b875cd1b62bd5e0.png)

		![image-20220815200238861](../../../TyporaImage/19e5972a9d9e6f888cf7f7997add7ecb5c989d22.png)

		![image-20220815200259125](../../../TyporaImage/a9468789e50fe61d80e12ee4a1cb73855533c1fc.png)

	- 将虚拟机的网络连接模式修改成NAT模式。首先点击“网络适配器”，选择“NAT模式”

		![image-20220815200327743](../../../TyporaImage/980fb0a5071db9d1bf88cb672f7cd7d414423d98.png)

	- 然后开机启动系统，编辑网卡配置文件，在终端输入命令`vim /etc/sysconfig/network-scripts/ifcfg-eth0`。具体配置如下：

		![image-20220815200401415](../../../TyporaImage/72bd28d00d8b752da7078c509706c890d3d6d859.png)

	- 编辑完成，保存退出，然后重启虚拟机网卡，动态获取ip地址，使用ping命令ping外网ip，测试能否联网

		![image-20220815200410949](../../../TyporaImage/5ae0c3d927dc8b5ad61e6ae06483f728f295c7a9.png)

	- 之前，我们说过VMware Network Adapter VMnet8虚拟网卡的作用，那我们现在就来测试一下

		![image-20220815200426008](../../../TyporaImage/b9b4a398da088d5ae0f99344ab197a184b9e4b97.png)

		![image-20220815200435870](../../../TyporaImage/c4d4d256a74d094167a1605c5c506950b864920e.png)

	- 如此看来，虚拟机能联通外网，确实不是通过VMware Network Adapter VMnet8虚拟网卡，那么为什么要有这块虚拟网卡呢？之前我们就说VMware Network Adapter VMnet8的作用是主机与虚拟机之间的通信，接下来，我们就用远程连接工具来测试一下

		![image-20220815200451232](../../../TyporaImage/f9c0ef7cd879419b3f4147040ee600336aa4d59d.png)

	- 然后，将VMware Network Adapter VMnet8启用之后，发现远程工具可以连接上虚拟机了

	- 那么，这就是NAT模式，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网，而VMware Network Adapter VMnet8虚拟网卡是用来与虚拟机通信的

4. Host-Only（仅主机模式）

	- Host-Only模式其实就是NAT模式去除了虚拟NAT设备，然后使用VMware Network Adapter VMnet1虚拟网卡连接VMnet1虚拟交换机来与虚拟机通信的，Host-Only模式将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。其网络结构如下图所示：

		![image-20220815200523595](../../../TyporaImage/9112bf9968122839aabf8048a0ea86cca6cb333f.png)

	- 通过上图，我们可以发现，如果要使得虚拟机能联网，我们可以将主机网卡共享给VMware Network Adapter VMnet1网卡，从而达到虚拟机联网的目的。接下来，我们就来测试一下。首先设置“虚拟网络编辑器”，可以设置DHCP的起始范围

		![image-20220815200545448](../../../TyporaImage/fbee609ea8624fb198bf20ff154b959e92303bd2.png)

	- 设置虚拟机为Host-Only模式

		![image-20220815200602718](../../../TyporaImage/6e25cf1fcebd6c40f3b0fa5938b1df63caccaf43.png)

	- 开机启动系统，然后设置网卡文件

		![image-20220815200612317](../../../TyporaImage/c64bde49346573bd5fc768b9196f0d03d11c75b5.png)

	- 保存退出，然后重启网卡，利用远程工具测试能否与主机通信

		![image-20220815200622408](../../../TyporaImage/5be5c99244429c5375411d5165ba9ae583d3cc41.png)

	- 主机与虚拟机之间可以通信，现在设置虚拟机联通外网

		![image-20220815200634892](../../../TyporaImage/bfd966fe4c9a9904684a1c02155a864590fe2df9.png)

	- 我们可以看到上图有一个提示，强制将VMware Network Adapter VMnet1的ip设置成192.168.137.1，那么接下来，我们就要将虚拟机的DHCP的子网和起始地址进行修改，点击“虚拟网络编辑器”

		![image-20220815200653975](../../../TyporaImage/26af0bbe03bc68d3fc8e56d25bedfe3b36b90820.png)

	- 重新配置网卡，将VMware Network Adapter VMnet1虚拟网卡作为虚拟机的路由

		![image-20220815200721717](../../../TyporaImage/4a2332b3944ce97b635ee3c4d71d43bd1e1cc191.png)

	- 重启网卡，然后通过 远程工具测试能否联通外网以及与主机通信。测试结果证明可以使得虚拟机连接外网

## 二、查看网络IP和网关

1. 查看虚拟网络编辑器

	![image-20220815201209483](../../../TyporaImage/29862c5ca010e080847f2d3a5903178d888487c6.png)

2. 修改虚拟网卡IP

	![image-20220815204412976](../../../TyporaImage/4ef964e9fa39db2a76e44431fa75098ede6b9423.png)

3. 查看网关

	![image-20220815204439960](../../../TyporaImage/20163e57c1c6b82448af52cc1ff6c536f4a60052.png)

	![image-20220815204455124](../../../TyporaImage/ab2b830cd96bb69e9f86fef52dec08e9e1654fba.png)

4. 查看 windows 环境的中 VMnet8 网络配置

	![image-20220815204605529](../../../TyporaImage/a3a76ec9a2880387198da9a307fdd4845abd1948.png)

## 三、配置网络IP地址

1. 自动抓取：每次自动获取的ip地址可能不一样，不适用于做服务器

	![image-20220815204635593](../../../TyporaImage/1dd45ae232ec2f3bc35b8cc2fda3ef8e708aa8c9.png)

2. 指定ip地址

	- `ifconfig` 查看当前网络配置

		```bash
		BOOTPROTO="static" 
		#IP 的配置方法[none|static|bootp|dhcp]（引导 时不 使用协议|静态分配 IP|BOOTP 协议|DHCP 协议）
		
		ONBOOT="yes" 
		#系统启动的时候网络接口是否有效（yes/no）
		
		#IP地址
		IPADDR=192.168.2.100 #网段必须符合要求，后面的主机地址自己设置
		#网关
		GATEWAY=192.168.2.2 #网关要和vm8虚拟交换机网关一样
		#域名解析器
		DNS1=192.168.2.2  #这个设置成和网关一样就行
		
		#子网掩码默认255.255.255.0
		```

	- 直接修改配置文件来指定IP，并可以连接到外网，编辑：vim /etc/sysconfig/network-scripts/ifcfg-ens160（centos7是ifcfg-ens33）

		![image-20220815204909611](../../../TyporaImage/a414c7903674fcdaf58a3f3e8ab13725f9a4b2ae.png)

		![](../../../TyporaImage/46b13351b7f4804b7dd921392fe0114aedd6685d.png)

	- 重启网络服务：service network restart

		```bash
		# centos8重启网卡的方法
		
		# 重启⽹卡之前⼀定要重新载⼊⼀下配置⽂件，不然不能⽴即⽣效
		nmcli c reload
		
		# 重启⽹卡（下⾯的三条命令都可以）：
		nmcli c up ens160
		nmcli d reapply ens160
		nmcli d connect ens160
		```

3. 修改IP地址后可能会遇到的问题

	- 物理机能 ping 通虚拟机，但是虚拟机 ping 不通物理机,一般都是因为物理机的 防火墙问题,把防火墙关闭就行
	- 虚拟机能 Ping 通物理机,但是虚拟机 Ping 不通外网,一般都是因为 DNS 的设置有 问题 
	- 虚拟机 Ping www.baidu.com 显示域名未知等信息,一般查看 GATEWAY 和 DNS 设 置是否正确
	- 如果以上全部设置完还是不行，需要关闭 NetworkManager 服务 
		- systemctl stop NetworkManager 关闭  
		- systemctl disable NetworkManager 禁用 
	- 如果检查发现 systemctl status network 有问题 需要检查 ifcfg-ens160

4. 配置主机名

	- 修改主机名称

		- `hostname` （功能描述：查看当前服务器的主机名称）
		- 如果感觉此主机名不合适，我们可以进行修改。通过编辑`vim /etc/hostname` 文文件
		- 修改完成后重启生效。如果想立即生效可以通过`hostnamectl set-hostname dselegent-study【要修改的主机名】`这个命令，然后重启终端就可以看到效果了

	- 修改 hosts 映射文件

		- 修改 linux 的主机映射文件（hosts 文件） 后续在 hadoop 阶段，虚拟机会比较多，配置时通常会采用主机名的方式配置， 比较简单方便。 不用刻意记 ip 地址。`vim /etc/host`。添加如下内容，重启设备，重启后，查看主机名，已经修改成功

			```bash
			192.168.2.100 ds100
			192.168.2.101 ds101
			192.168.2.102 ds102
			192.168.2.103 ds103
			192.168.2.104 ds104
			192.168.2.105 ds105
			```

		- 修改 windows 的主机映射文件（hosts 文件）。进入 `C:\Windows\System32\drivers\etc` 路径。打开 hosts 文件并添加如下内容，需要先将该文件只读关闭，然后写入内容保存，最后恢复到只读状态。这时可以在windows通过`ping ds100`来测试是否连通虚拟机

			```bash
			192.168.2.100 ds100
			192.168.2.101 ds101
			192.168.2.102 ds102
			192.168.2.103 ds103
			192.168.2.104 ds104
			192.168.2.105 ds105
			```

5. 远程登录

	- [使用WindTerm进行远程连接](https://blog.51cto.com/yunskj/9941019)

